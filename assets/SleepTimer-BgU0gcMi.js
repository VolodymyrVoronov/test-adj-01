import{c as R,u as b,a as y,r as A,S as _,j as s,m as M,A as $}from"./index-CyiMTvcn.js";import{B as N}from"./button-D2Aa-sMn.js";const k=r=>{const e=Math.floor(r/60).toString().padStart(2,"0"),t=Math.floor(r%60).toString().padStart(2,"0");return`${e}:${t}`},z=r=>{const e=R.c(32),{sleepTimeoutRef:t,stopAll:g}=r,[d,n,l,a,o]=b(y(B));let x,S;if(e[0]!==o||e[1]!==l||e[2]!==n?(x=()=>{if(n===null)return;const i=setInterval(()=>{if(l!==null){if(l<=1){clearInterval(i);return}o(l-1)}},1e3);return()=>clearInterval(i)},S=[o,l,n],e[0]=o,e[1]=l,e[2]=n,e[3]=x,e[4]=S):(x=e[3],S=e[4]),A.useEffect(x,S),!d||d<600)return null;let T;e[5]!==o||e[6]!==a||e[7]!==t||e[8]!==g?(T=i=>{t.current&&(clearTimeout(t.current),t.current=null),i!==null&&i>0&&(t.current=setTimeout(()=>{g(),a(null)},i*1e3),a(i),o(i))},e[5]=o,e[6]=a,e[7]=t,e[8]=g,e[9]=T):T=e[9];const E=T;let h;e[10]!==a||e[11]!==t?(h=()=>{t.current&&(clearTimeout(t.current),t.current=null),a(null)},e[10]=a,e[11]=t,e[12]=h):h=e[12];const C=h;let v;e[13]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx("span",{className:"text-sm font-medium",children:"Sleep Timer"}),e[13]=v):v=e[13];let u;e[14]!==E||e[15]!==n||e[16]!==d?(u=_.map(i=>{const{label:I,value:w}=i;return d>w?s.jsx(N,{variant:n===w?"default":"outline",onClick:()=>E(w),size:"sm",children:I},w):null}),e[14]=E,e[15]=n,e[16]=d,e[17]=u):u=e[17];let c;e[18]!==u?(c=s.jsx("div",{className:"flex flex-row flex-wrap gap-2",children:u}),e[18]=u,e[19]=c):c=e[19];let m;e[20]!==l?(m=l!==null&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-muted-foreground text-sm",children:"Sleep timer will be activated in:"}),s.jsx(M.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.5,ease:"easeInOut"},className:"text-muted-foreground text-sm font-semibold",children:k(l)})]}),e[20]=l,e[21]=m):m=e[21];let f;e[22]!==l||e[23]!==m?(f=s.jsx($,{mode:"wait",children:m},l),e[22]=l,e[23]=m,e[24]=f):f=e[24];let p;e[25]!==C||e[26]!==n?(p=n&&s.jsx(N,{variant:"destructive",onClick:()=>C(),children:"Reset Sleep Timer"}),e[25]=C,e[26]=n,e[27]=p):p=e[27];let j;return e[28]!==p||e[29]!==c||e[30]!==f?(j=s.jsxs("div",{className:"flex w-full flex-col gap-2",children:[v,c,f,p]}),e[28]=p,e[29]=c,e[30]=f,e[31]=j):j=e[31],j};function B(r){return[r.totalDuration,r.sleepTime,r.sleepCountdown,r.setSleepTime,r.setSleepCountdown]}export{z as default};
